<form id="createForm" class="blogForm">
  <input type="text" name="title" id="title" placeholder="Title" required />
  <textarea name="content" id="content" cols="30" rows="10" placeholder="Your content goes in here" required></textarea>
  <button type="submit">Post</button>
</form>

<script>
  document.getElementById("createForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const title = document.getElementById("title").value.trim();
    const content = document.getElementById("content").value.trim();

    if (!title || !content) {
      alert("Both title and content are required.");
      return;
    }

    try {
      const response = await fetch("/blog/admin/create", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ title, content }),
      });

      const data = await response.json();

      if (response.ok) {
        alert("New blog post created successfully!");
        window.location.href = "/blog/admin";
      } else {
        alert(`Failed to create post: ${data.data.message || "Unknown error"}`);
      }
    } catch (error) {
      console.error(error);
      alert("An unexpected error occurred while creating the post.");
    }
  });
</script>
